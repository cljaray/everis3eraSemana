<h2 class="mt-3 text-center">Datos exámen PCR</h2>

<form class="px-5 pb-5 mt-3" #pcrForm="ngForm" (ngSubmit)="validacion.validacionForma(pcrForm)" (change)="pruebaChange(pcrForm)" novalidate>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label for="nombre">Nombre</label>
        <input type="text" class="form-control" id="nombre" placeholder="Nombre"
        [(ngModel)]="pcr.nombre" ngModel #nombre="ngModel" name="nombre" required>
      </div>
      <div class="form-group col-md-4">
        <label for="Apellido">Apellido</label>
        <input type="text" class="form-control" id="Apellido" placeholder="Apellido"
        [(ngModel)]="pcr.apellido" ngModel #apellido="ngModel" name="apellido" required>
      </div>
      <div class="form-group col-md-4">
        <label>Paciente alto riesgo</label>
        <select class="custom-select" placeholder="Selecciona..."
        [(ngModel)]="pcr.altoRiesgo" ngModel #altoRiesgo="ngModel" name="altoRiesgo" required>
            <option value="true">Si</option>
            <option value="false">No</option>
        </select>
    </div> 
    </div>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label for="rut">Rut</label>
        <input type="text" class="form-control" id="rut" placeholder="Rut"
        [(ngModel)]="pcr.rut" ngModel #rut="ngModel" name="rut" pattern="^(\d{1}|\d{2})\.(\d{3}\.\d{3}-)([kK]{1}$|\d{1}$)" required>
        <small *ngIf="rut.touched && !rut.valid">Rut debe tener formato</small>
      </div>
      <div class="form-group col-md-4">
        <label for="edad">Edad</label>
        <input type="number" class="form-control" id="edad" placeholder="Edad" [ngClass] = "validacion.edadValida ? '' : 'invalidInput'"
        [(ngModel)]="pcr.edad" ngModel #edad="ngModel" name="edad" required (change)="validacion.validacionEdad(edad)">
      </div>   
      <div class="form-group col-md-4">
        <label>Resultado exámen</label>
        <select class="custom-select" 
        [(ngModel)]="pcr.resultado" ngModel #resultado="ngModel" name="resultado" required>
            <option value="pendiente" >Pendiente</option >
            <option value="positivo">Positivo</option>
            <option value="negativo">Negativo</option>
        </select>
    </div>   
    </div>
    
    <div class="form-row">
      <div class="form-group col-md-4">
        <label for="numeroTelefono">Numero de teléfono</label>
        <input type="number" class="form-control" id="telefono" placeholder="Teléfono" [ngClass] = "validacion.telefonoValido ? '' : 'invalidInput' "
        [(ngModel)]="pcr.telefono" ngModel #numeroTelefono="ngModel" name="numeroTelefono" minlength="8" maxlength="9" (change)="validacion.validacionTelefono(numeroTelefono)" required>
      </div>
      <div class="form-group col-md-4">
        <label for="telefonoSecundario">Numero de teléfono secundario</label>
        <input type="number" class="form-control" id="edad" placeholder="Teléfono secundario" [ngClass] = "validacion.telefonoSecundarioValido ? '' : 'invalidInput' "
        [(ngModel)]="pcr.telefonoSecundario" ngModel #telefonoSecundario="ngModel" name="telefonoSecundario" (change)="validacion.validacionTelefonoSecundario(telefonoSecundario)" required>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="direccion">Dirección de vivienda</label>
        <input type="text" class="form-control" id="direccion" placeholder="Direccion"
        [(ngModel)]="pcr.direccion" name="direccion" ngModel #direccion="ngModel" name="direccion" required>
      </div>
      <div class="form-group col-md-3">
        <label for="comunaDeResidencia">Comuna de residencia</label>
        <input type="text" class="form-control" id="comunaResidencia" placeholder="Comuna"
        [(ngModel)]="pcr.comunaDeResidencia" name="comunaDeResidencia" ngModel #comunaDeResidencia="ngModel" name="comunaDeResidencia" required>
      </div>      
      <div class="form-group col-md-3">
        <label for="residencia">Villa o población</label>
        <input type="text" class="form-control" id="residencia" placeholder="Villa o población"
        [(ngModel)]="pcr.villaPoblacion" name="residencia" ngModel #residencia="ngModel" name="residencia" required>
      </div>      
    </div>
    <div class="form-group">
      
    </div>
    <div class="form-row">
        <div class="form-group col-md-4">
            <label for="hora">Hora de exámen</label>
            <input type="text" class="form-control" id="hora" placeholder="11:11"
            [(ngModel)]="pcr.hora" ngModel #hora="ngModel"
            name="hora" pattern="^(1?[0-9]|2[0-3]):[0-5][0-9]$" required>
        </div>
        <div class="form-group col-md-4">
            <label for="inputAddress2">Lugar de toma de exámen</label>
            <input type="text" class="form-control" id="locacion" placeholder="Lugar de toma de exámen"
            [(ngModel)]="pcr.lugarTomaExamen" name="locacion" ngModel #locacion="ngModel" name="locacion" required>
        </div>       
        

    </div>
    <div class="form-row">
        <div class="form-group col-md-4">
            <label for="inputAddress">Correo:</label>
            <input type="text" class="form-control" id="correo" placeholder="tucorreo@gmail.com"
            [(ngModel)]="pcr.correo" name="correo" ngModel #correo="ngModel" name="correo" email required>
        </div>
        <div class="form-group col-md-4">
                <label for="inputAddress2">Confirmacion correo:</label>
            <input type="text" class="form-control" id="confirmacionCorreo" placeholder="tucorreo@gmail.com" [ngClass] = "validacion.correoValido ? '': 'invalidInput' "
            [(ngModel)]="pcr.confirmacionCorreo" name="confirmacionCorreo" ngModel #confirmacionCorreo="ngModel" name="confirmacionCorreo" (change)="validacionCorreo(confirmacionCorreo)" email required>
        </div>
    </div>
  </form>
